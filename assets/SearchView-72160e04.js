import{_ as g,C as T}from"./CloudyIcon-e7c850a9.js";import{N as k,R as x,S as v,a as S,b as N,T as V,g as B}from"./weatherService-21c9e9bb.js";import{r as h,o as t,g as m,w as f,c,h as l,a as r,t as y,e as C,b as D,j as M,v as b,k as H,F as R,i as P,p as U,f as Z}from"./index-31d25830.js";import{P as E}from"./PreLoader-6cefb5f5.js";/* empty css                                                                  */const J={props:["city","maxTemp","minTemp","weather"],components:{CloudyIcon:T,NightIcon:k,RainIcon:x,SnowyIcon:v,SunCloudyIcon:S,SunIcon:N,ThunderIcon:V},data(){return{posNim:!1}},computed:{pos(){return this.maxTemp>0},posMin(){return this.minTemp>0}}},O={key:0,class:"history__item flex"},F={key:0},K={key:1};function A(o,i,n,_,e,a){const p=h("SunCloudyIcon"),w=h("CloudyIcon"),u=h("RainIcon"),s=h("SunIcon"),L=h("ThunderIcon"),I=h("RouterLink");return t(),m(I,{to:{name:"city",params:{name:n.city}}},{default:f(()=>[n.city?(t(),c("div",O,[n.weather==="небольшая облачность"?(t(),m(p,{key:0})):l("",!0),n.weather==="few clouds"||n.weather==="переменная облачность"?(t(),m(w,{key:1})):l("",!0),n.weather==="light rain"||n.weather==="небольшой дождь"?(t(),m(u,{key:2})):l("",!0),n.weather==="clear sky"||n.weather==="ясно"?(t(),m(s,{key:3})):l("",!0),n.weather==="broken clouds"||n.weather==="облачно с прояснениями"?(t(),m(L,{key:4})):l("",!0),r("h3",null,y(n.city),1),r("span",null,[a.pos?(t(),c("span",F,"+")):l("",!0),C(" "+y(n.maxTemp)+"° / ",1),a.posMin?(t(),c("span",K,"+")):l("",!0),C(" "+y(n.minTemp)+"°",1)])])):l("",!0)]),_:1},8,["to"])}const G=g(J,[["render",A],["__scopeId","data-v-4c384ad9"]]);const W={components:{SearchItem:G,PreLoaderVue:E},data(){return{cityName:"",error:null,city:null,country:null,weather:null,minTemp:null,maxTemp:null,history:[],isLoading:!1}},async mounted(){this.weatherData();const o=await localStorage.getItem("history");o&&(this.history=JSON.parse(o))},computed:{clearInput(){return this.cityName!=""}},methods:{async weatherData(){if(this.cityName)try{this.isLoading=!0;const o=await B(this.cityName);this.city=o.city,this.country=o.country,this.weather=o.weather,this.maxTemp=Math.round(o.maxTemp),this.minTemp=Math.round(o.minTemp);const i={city:this.city,maxTemp:this.maxTemp,minTemp:this.minTemp,weather:this.weather};this.history.some(n=>n.city===i.city)||this.history.push(i),localStorage.setItem("history",JSON.stringify(this.history)),this.cityName=null,this.isLoading=!1}catch(o){console.error("Error:",o)}},deleteHistory(){this.history=[],localStorage.setItem("history",JSON.stringify(this.history))},getUserLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showUserLocation):console.log("Geolocation is not supported by this browser.")},showUserLocation(o){const i=o.coords.latitude,n=o.coords.longitude,_=`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${i}&lon=${n}`;fetch(_).then(e=>e.json()).then(e=>{if(e.address&&e.address.city){const a=e.address.city;console.log(a," aaaaaaaaaaaaaaaaaaaaaaaaaa"),this.cityName=a}else console.log("City not found")}).catch(e=>{console.log("Error occurred while fetching geolocation data:",e)})},clearInputCity(){this.cityName=""}}},d=o=>(U("data-v-8c98bf12"),o=o(),Z(),o),j={key:1,class:"serach"},q={class:"search-input"},z=d(()=>r("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M3.828 6.99998H16V8.99998H3.828L9.192 14.364L7.778 15.778L0 7.99998L7.778 0.221985L9.192 1.63598L3.828 6.99998Z",fill:"#1C293D"})],-1)),Q=d(()=>r("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M10.9091 0L10.91 2.78364C12.512 2.98617 14.0011 3.71585 15.1429 4.85774C16.2846 5.99963 17.0141 7.48887 17.2164 9.09091H20V10.9091L17.2164 10.91C17.0139 12.5119 16.2843 14.0009 15.1426 15.1426C14.0009 16.2843 12.5119 17.0139 10.91 17.2164L10.9091 20H9.09091V17.2164C7.48887 17.0141 5.99963 16.2846 4.85774 15.1429C3.71585 14.0011 2.98617 12.512 2.78364 10.91L0 10.9091V9.09091H2.78364C2.98599 7.48873 3.71558 5.9994 4.85749 4.85749C5.9994 3.71558 7.48873 2.98599 9.09091 2.78364V0H10.9091ZM10 4.54545C8.55336 4.54545 7.16598 5.12013 6.14305 6.14305C5.12013 7.16598 4.54545 8.55336 4.54545 10C4.54545 11.4466 5.12013 12.834 6.14305 13.8569C7.16598 14.8799 8.55336 15.4545 10 15.4545C11.4466 15.4545 12.834 14.8799 13.8569 13.8569C14.8799 12.834 15.4545 11.4466 15.4545 10C15.4545 8.55336 14.8799 7.16598 13.8569 6.14305C12.834 5.12013 11.4466 4.54545 10 4.54545ZM10 8.18182C10.4822 8.18182 10.9447 8.37338 11.2856 8.71435C11.6266 9.05533 11.8182 9.51779 11.8182 10C11.8182 10.4822 11.6266 10.9447 11.2856 11.2856C10.9447 11.6266 10.4822 11.8182 10 11.8182C9.51779 11.8182 9.05533 11.6266 8.71435 11.2856C8.37338 10.9447 8.18182 10.4822 8.18182 10C8.18182 9.51779 8.37338 9.05533 8.71435 8.71435C9.05533 8.37338 9.51779 8.18182 10 8.18182Z",fill:"#1C293D"})],-1)),X=[Q],Y=d(()=>r("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M0.931287 1.0359L0.979699 0.979821C1.15721 0.80231 1.43499 0.786172 1.63073 0.931409L1.68681 0.979821L5.99992 5.29271L10.313 0.979821C10.5083 0.784558 10.8249 0.784558 11.0201 0.979821C11.2154 1.17508 11.2154 1.49167 11.0201 1.68693L6.70725 6.00004L11.0201 10.3132C11.1977 10.4907 11.2138 10.7684 11.0686 10.9642L11.0201 11.0203C10.8426 11.1978 10.5649 11.2139 10.3691 11.0687L10.313 11.0203L5.99992 6.70737L1.68681 11.0203C1.49154 11.2155 1.17496 11.2155 0.979699 11.0203C0.784436 10.825 0.784436 10.5084 0.979699 10.3132L5.29259 6.00004L0.979699 1.68693C0.802188 1.50942 0.78605 1.23164 0.931287 1.0359L0.979699 0.979821L0.931287 1.0359Z",fill:"#B4B4B4"})],-1)),$=[Y],ee={key:1,class:"center"},te={key:2,class:"history"},oe={class:"block flex"},ne={key:0},se={key:1},ie=d(()=>r("div",null,null,-1));function ae(o,i,n,_,e,a){const p=h("PreLoaderVue"),w=h("RouterLink"),u=h("SearchItem");return e.isLoading?(t(),m(p,{key:0})):(t(),c("div",j,[r("div",q,[D(w,{class:"icon",to:"/"},{default:f(()=>[z]),_:1}),M(r("input",{"onUpdate:modelValue":i[0]||(i[0]=s=>e.cityName=s),type:"text",placeholder:"Поиск города",onKeyup:i[1]||(i[1]=H((...s)=>a.weatherData&&a.weatherData(...s),["enter"]))},null,544),[[b,e.cityName]]),a.clearInput?(t(),c("button",{key:1,class:"icon",onClick:i[3]||(i[3]=(...s)=>a.clearInputCity&&a.clearInputCity(...s))},$)):(t(),c("button",{key:0,class:"icon",onClick:i[2]||(i[2]=(...s)=>a.getUserLocation&&a.getUserLocation(...s))},X))]),e.city?(t(),m(u,{key:0,city:e.city,maxTemp:e.maxTemp,minTemp:e.minTemp,weather:e.weather},null,8,["city","maxTemp","minTemp","weather"])):l("",!0),e.history.length==0&&e.city==null?(t(),c("p",ee,"Введите название города")):l("",!0),e.history.length!=0&&e.country==null?(t(),c("div",te,[r("div",oe,[e.country?(t(),c("p",ne,y(e.country),1)):(t(),c("p",se,"История поиска")),r("button",{onClick:i[4]||(i[4]=(...s)=>a.deleteHistory&&a.deleteHistory(...s))},"Очистить")]),(t(!0),c(R,null,P(e.history,s=>(t(),m(u,{key:s,city:s.city,maxTemp:s.maxTemp,minTemp:s.minTemp,weather:s.weather},null,8,["city","maxTemp","minTemp","weather"]))),128))])):l("",!0),ie]))}const ue=g(W,[["render",ae],["__scopeId","data-v-8c98bf12"]]);export{ue as default};
