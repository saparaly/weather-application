import{_ as f,C as B}from"./CloudyIcon-e7c850a9.js";import{N,R as V,S as M,a as b,b as Z,T as D,g as R}from"./weatherService-21c9e9bb.js";import{r as l,o as a,c as d,a as t,g as h,h as r,b as y,w as p,e as C,t as L,p as I,f as x,j as E,v as H,k as P,F as U,i as j}from"./index-31d25830.js";import{P as J}from"./PreLoader-6cefb5f5.js";/* empty css                                                                  */const O={props:["city","currentTemp","weather"],components:{CloudyIcon:B,NightIcon:N,RainIcon:V,SnowyIcon:M,SunCloudyIcon:b,SunIcon:Z,ThunderIcon:D},data(){return{saved:[],added:!1,removed:!1}},computed:{cityExists(){return this.saved.some(e=>e.city===this.city)}},async mounted(){const e=await localStorage.getItem("saved");e&&(this.saved=JSON.parse(e),console.log(this.saved))},methods:{save(e){const n=this.saved.findIndex(s=>s.city===e);if(this.removed=!1,this.added=!1,n!==-1)this.saved.splice(n,1),this.removed=!0,this.added=!1,this.removed||(this.added=!0,setTimeout(()=>{this.removed=!1},3e3)),this.removed=e;else{const s={city:e,currentTemp:this.currentTemp,weather:this.weather};this.saved.push(s)}localStorage.setItem("saved",JSON.stringify(this.saved)),this.removed||(this.added=!0,this.removed||(this.added=!0,setTimeout(()=>{this.added=!1},3e3)))}}},_=e=>(I("data-v-952d6d2b"),e=e(),x(),e),F={class:"saved__item flex"},K={class:"left"},A={class:"middle"},G={class:"icon"},W={key:0,width:"20",height:"19",viewBox:"0 0 20 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},q=_(()=>t("path",{d:"M10 15.5445L3.82021 19L5.20021 12.061L0 7.2576L7.03321 6.42436L10 0L12.9668 6.42436L20 7.2576L14.7998 12.061L16.1798 19L10 15.5445Z",fill:"#47B1E6"},null,-1)),z=[q],Q={key:1,width:"20",height:"19",viewBox:"0 0 20 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},X=_(()=>t("path",{d:"M10 15.5445L3.82021 19L5.20021 12.061L0 7.2576L7.03321 6.42436L10 0L12.9668 6.42436L20 7.2576L14.7998 12.061L16.1798 19L10 15.5445Z",fill:"#B4B4B4"},null,-1)),Y=[X],$={key:0,class:"popup flex"},e1=_(()=>t("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M10 20C4.477 20 0 15.523 0 10C0 4.477 4.477 0 10 0C15.523 0 20 4.477 20 10C20 15.523 15.523 20 10 20ZM10 18C12.1217 18 14.1566 17.1571 15.6569 15.6569C17.1571 14.1566 18 12.1217 18 10C18 7.87827 17.1571 5.84344 15.6569 4.34315C14.1566 2.84285 12.1217 2 10 2C7.87827 2 5.84344 2.84285 4.34315 4.34315C2.84285 5.84344 2 7.87827 2 10C2 12.1217 2.84285 14.1566 4.34315 15.6569C5.84344 17.1571 7.87827 18 10 18V18ZM9.003 14L4.76 9.757L6.174 8.343L9.003 11.172L14.659 5.515L16.074 6.929L9.003 14Z",fill:"#1C293D"})],-1)),t1={key:1,class:"popup flex"},s1=_(()=>t("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M10 20C4.477 20 0 15.523 0 10C0 4.477 4.477 0 10 0C15.523 0 20 4.477 20 10C20 15.523 15.523 20 10 20ZM10 18C12.1217 18 14.1566 17.1571 15.6569 15.6569C17.1571 14.1566 18 12.1217 18 10C18 7.87827 17.1571 5.84344 15.6569 4.34315C14.1566 2.84285 12.1217 2 10 2C7.87827 2 5.84344 2.84285 4.34315 4.34315C2.84285 5.84344 2 7.87827 2 10C2 12.1217 2.84285 14.1566 4.34315 15.6569C5.84344 17.1571 7.87827 18 10 18V18ZM9.003 14L4.76 9.757L6.174 8.343L9.003 11.172L14.659 5.515L16.074 6.929L9.003 14Z",fill:"#1C293D"})],-1));function o1(e,n,s,m,o,i){const w=l("SunCloudyIcon"),v=l("CloudyIcon"),u=l("RainIcon"),c=l("SunIcon"),k=l("ThunderIcon"),S=l("RouterLink");return a(),d("div",F,[t("div",K,[s.weather=="небольшая облачность"?(a(),h(w,{key:0})):r("",!0),s.weather=="few clouds"||s.weather=="переменная облачность"?(a(),h(v,{key:1})):r("",!0),s.weather=="light rain"||s.weather=="небольшой дождь"?(a(),h(u,{key:2})):r("",!0),s.weather=="clear sky"||s.weather=="ясно"?(a(),h(c,{key:3})):r("",!0),s.weather=="broken clouds"||s.weather=="облачно с прояснениями"?(a(),h(k,{key:4})):r("",!0)]),t("div",A,[t("h2",null,[y(S,{to:{name:"city",params:{name:s.city}}},{default:p(()=>[C(L(s.city),1)]),_:1},8,["to"])]),t("p",null,L(s.weather),1),t("h2",null,L(s.currentTemp)+"° С",1)]),t("div",{class:"right",onClick:n[0]||(n[0]=T=>i.save(s.city))},[t("button",G,[i.cityExists?(a(),d("svg",W,z)):r("",!0),i.cityExists?r("",!0):(a(),d("svg",Q,Y))])]),o.added?(a(),d("div",$,[e1,C(" Локация добавлена в избранное ")])):r("",!0),o.removed?(a(),d("div",t1,[s1,C(" Локация удалена "),t("button",{onClick:n[1]||(n[1]=T=>i.save(s.city))},"Отменить")])):r("",!0)])}const n1=f(O,[["render",o1],["__scopeId","data-v-952d6d2b"]]);const a1={components:{LocationItem:n1,PreLoaderVue:J},data(){return{cityName:"",error:null,city:null,weather:null,currentTemp:null,saved:[],added:!1,removed:!1,isLoading:!1}},async mounted(){this.weatherData();const e=await localStorage.getItem("saved");e&&(this.saved=JSON.parse(e))},computed:{isSaved(){return this.saved.some(e=>e.city===this.city)},clearInput(){return this.cityName!=""}},methods:{async weatherData(){if(this.cityName)try{this.isLoading=!0;const e=await R(this.cityName);this.city=e.city,this.weather=e.weather,this.currentTemp=Math.round(e.currentTemp),this.isLoading=!1}catch(e){console.error("Error",e)}},clearInputCity(){this.cityName=""},getUserLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showUserLocation):console.log("Geolocation is not supported by this browser.")},showUserLocation(e){const n=e.coords.latitude,s=e.coords.longitude,m=`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${n}&lon=${s}`;fetch(m).then(o=>o.json()).then(o=>{if(o.address&&o.address.city){const i=o.address.city;console.log(i," aaaaaaaaaaaaaaaaaaaaaaaaaa"),this.cityName=i}else console.log("City not found")}).catch(o=>{console.log("Error",o)})}}},g=e=>(I("data-v-3682df0a"),e=e(),x(),e),i1={key:1,class:"serach"},c1={class:"search-input"},r1=g(()=>t("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M3.828 6.99998H16V8.99998H3.828L9.192 14.364L7.778 15.778L0 7.99998L7.778 0.221985L9.192 1.63598L3.828 6.99998Z",fill:"#1C293D"})],-1)),d1=g(()=>t("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M10.9091 0L10.91 2.78364C12.512 2.98617 14.0011 3.71585 15.1429 4.85774C16.2846 5.99963 17.0141 7.48887 17.2164 9.09091H20V10.9091L17.2164 10.91C17.0139 12.5119 16.2843 14.0009 15.1426 15.1426C14.0009 16.2843 12.5119 17.0139 10.91 17.2164L10.9091 20H9.09091V17.2164C7.48887 17.0141 5.99963 16.2846 4.85774 15.1429C3.71585 14.0011 2.98617 12.512 2.78364 10.91L0 10.9091V9.09091H2.78364C2.98599 7.48873 3.71558 5.9994 4.85749 4.85749C5.9994 3.71558 7.48873 2.98599 9.09091 2.78364V0H10.9091ZM10 4.54545C8.55336 4.54545 7.16598 5.12013 6.14305 6.14305C5.12013 7.16598 4.54545 8.55336 4.54545 10C4.54545 11.4466 5.12013 12.834 6.14305 13.8569C7.16598 14.8799 8.55336 15.4545 10 15.4545C11.4466 15.4545 12.834 14.8799 13.8569 13.8569C14.8799 12.834 15.4545 11.4466 15.4545 10C15.4545 8.55336 14.8799 7.16598 13.8569 6.14305C12.834 5.12013 11.4466 4.54545 10 4.54545ZM10 8.18182C10.4822 8.18182 10.9447 8.37338 11.2856 8.71435C11.6266 9.05533 11.8182 9.51779 11.8182 10C11.8182 10.4822 11.6266 10.9447 11.2856 11.2856C10.9447 11.6266 10.4822 11.8182 10 11.8182C9.51779 11.8182 9.05533 11.6266 8.71435 11.2856C8.37338 10.9447 8.18182 10.4822 8.18182 10C8.18182 9.51779 8.37338 9.05533 8.71435 8.71435C9.05533 8.37338 9.51779 8.18182 10 8.18182Z",fill:"#1C293D"})],-1)),l1=[d1],h1=g(()=>t("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M0.931287 1.0359L0.979699 0.979821C1.15721 0.80231 1.43499 0.786172 1.63073 0.931409L1.68681 0.979821L5.99992 5.29271L10.313 0.979821C10.5083 0.784558 10.8249 0.784558 11.0201 0.979821C11.2154 1.17508 11.2154 1.49167 11.0201 1.68693L6.70725 6.00004L11.0201 10.3132C11.1977 10.4907 11.2138 10.7684 11.0686 10.9642L11.0201 11.0203C10.8426 11.1978 10.5649 11.2139 10.3691 11.0687L10.313 11.0203L5.99992 6.70737L1.68681 11.0203C1.49154 11.2155 1.17496 11.2155 0.979699 11.0203C0.784436 10.825 0.784436 10.5084 0.979699 10.3132L5.29259 6.00004L0.979699 1.68693C0.802188 1.50942 0.78605 1.23164 0.931287 1.0359L0.979699 0.979821L0.931287 1.0359Z",fill:"#B4B4B4"})],-1)),u1=[h1],_1={key:0,class:"center"},m1={class:"saved"},w1={key:1,class:"saved"};function v1(e,n,s,m,o,i){const w=l("PreLoaderVue"),v=l("RouterLink"),u=l("LocationItem");return o.isLoading?(a(),h(w,{key:0})):(a(),d("div",i1,[t("div",c1,[y(v,{class:"icon",to:"/"},{default:p(()=>[r1]),_:1}),E(t("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=c=>o.cityName=c),placeholder:"Поиск локации",onKeyup:n[1]||(n[1]=P((...c)=>i.weatherData&&i.weatherData(...c),["enter"]))},null,544),[[H,o.cityName]]),i.clearInput?(a(),d("button",{key:1,class:"icon",onClick:n[3]||(n[3]=(...c)=>i.clearInputCity&&i.clearInputCity(...c))},u1)):(a(),d("button",{key:0,class:"icon",onClick:n[2]||(n[2]=(...c)=>i.getUserLocation&&i.getUserLocation(...c))},l1))]),o.city==null&&o.saved.length==0?(a(),d("p",_1,"У вас пока нет избранных локаций")):r("",!0),t("div",m1,[(a(!0),d(U,null,j(o.saved,c=>(a(),h(u,{key:c,weather:c.weather,currentTemp:c.currentTemp,city:c.city},null,8,["weather","currentTemp","city"]))),128))]),!i.isSaved&&o.city!=null?(a(),d("div",w1,[y(u,{weather:o.weather,currentTemp:o.currentTemp,city:o.city},null,8,["weather","currentTemp","city"])])):r("",!0)]))}const p1=f(a1,[["render",v1],["__scopeId","data-v-3682df0a"]]);export{p1 as default};
